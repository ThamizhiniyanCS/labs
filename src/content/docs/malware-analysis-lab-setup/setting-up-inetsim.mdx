---
title: "Setting up INetSim"
description: "Instructions setting up INetSim on REMnux VM."
sidebar:
  order: 17
---

import { Steps } from "@astrojs/starlight/components";

INetSim is a software suite for simulating common internet services in a lab environment, e.g. for analyzing the network behaviour of unknown malware samples.

### Manual Configuration

<Steps>

1. On Remnux, open the `/etc/inetsim/inetsim.conf` file as root with your favourite text editor which is available on Remnux. In my case, I am using `vim`.

   ```bash
   sudo vim /etc/inetsim/inetsim.conf
   ```

   ![image](assets/Untitled%2044.png)

2. Uncomment the `start_service dns` line
   ![image](assets/Untitled%2045.png)

3. Uncomment the `service_bind_address 10.10.10.1` and change the ip address in the line as `service_bind_address 0.0.0.0`. `0.0.0.0` is a short hand notation for all interfaces. this will bind to all the interfaces on the Remnux machine.
   ![image](assets/Untitled%2046.png)

4. Uncomment the line `dns_default_ip 10.10.10.1` and change the ip address in that line as `dns_default_ip 172.16.172.128` . in this case `172.16.172.128` is the IP address of the Remnux host.
   ![image](assets/untitled%2049.png)

5. Now save and exit the file.

</Steps>

### Automated Configuration

```bash
sudo sed -i -E -e 's/#start_service\s+dns/start_service dns/' \
    -e 's/#service_bind_address\s+10.10.10.1/service_bind_address 0.0.0.0/' \
    -e 's/#dns_default_ip\s+10.10.10.1/dns_default_ip <REMNUX_VM_IP_ADDRESS>/' \
    /etc/inetsim/inetsim.conf
```

![image](assets/Pasted%20image%2020241107174222.png)

### Starting the INetSim Service

Run the command `inetsim`
![image](assets/Untitled%2048.png)

### Configuring DNS on the Windows Dynamic Analysis VM

On Dynamic Analysis Windows VM, goto **Start Menu** → **View Network Connections** → **Ethernet** → **Properties** → **IPv4** and set the dns server the inetsim dns server by typing the IP address that we configured as `dns_default_ip` which is REMnux VMs IP address: `172.16.172.128`.
![image](assets/Pasted%20image%2020241107174743.png)

### Verifying the INetSim Setup

To Check whether `inetsim` is configured correctly, open chrome ( or the browser of your choice ) and [https://www.google.com/](https://www.google.com/) or what ever website you like, you should see the `inetsim` boiler plate website with which is hosted by inetsim http/https web servers.

![image](assets/Pasted%20image%2020241107175207.png)

Now we got our fake dns and fake network services setup ready.

I also took a snapshot and named it as `Pre_Execution_Fake_DNS_Setup`.
